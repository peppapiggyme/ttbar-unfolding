# TUFA

## Overview

[![ROOT](https://img.shields.io/badge/ROOT-v6.28/04-blue)](https://root.cern.ch/)
[![TUFA](https://img.shields.io/badge/TUFA-v1.2-blue)](https://github.com/peppapiggyme/ttbar-unfolding)
[![CMake](https://github.com/peppapiggyme/ttbar-unfolding/actions/workflows/cmake.yml/badge.svg)](https://github.com/peppapiggyme/ttbar-unfolding/actions/workflows/cmake.yml)

Collection of works on unfolding practices using $t\bar{t}$ NLO samples.

* `Author`: [PPM](bowen.zhang23@outlook.com)
* `Data`: 26/10/2023
* `Workspace`: ~/Documents/projects/ttbar-unfolding/

## Samples

**[MG5PY8 $t\bar{t}$ samples]** The matrix elements are generated by `MadGraph5 aMC@NLO`, $t\bar{t}$ decays to $bW^{+}\bar{b}bW^{-}$ to $b\mu^{+}\nu_{\mu}\bar{b}b\mu^{-}\bar{\nu}_{\mu}$ using `MadSpin`. The samples are showered by `Pythia8`. The output Hepmc file is reconstructed by fast detector simulation tool `Delphes`.

## Structure

* `RooUnfold` (external): Roofit extension. Interface to common unfolding methods implemented in ROOT.
* `ttbar_MadTree`: Tool to the analysis of the MG5PY8 $t\bar{t}$ samples. Populating trees and histograms.
* `ttbar_Unfold`: Application of RooUnfold with kinematic distributions derived from ttbar_MadTree.
* `FlowModel`: Training and evaluation of the normalising flow models.

## Details

[Here](./doc/Details.md)

## Conclusion

In this specific instance, the utilization of the RealNVP model has proven to outperform the conventional unfolding method in generating a more accurate distribution of $S_T$ from the reco distribution.
It's worth noting that this may not represent a universal solution for all real analysis scenarios.
The full spectrum of possibilities offered by normalizing flow models remains largely unexplored.

It's imperative to emphasize that the choice of which model to employ should be closely aligned with the specific nuances of the problem at hand.
A prudent approach involves a comparative assessment, applying both the traditional and the novel methods, in order to determine the more suitable and effective solution for the real-world problem at play.
